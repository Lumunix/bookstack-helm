# =============================================================================
# BookStack Helm Chart - values.yaml
# =============================================================================
# Full docs: README.md (Kubernetes Secrets, quick start), CONFIGURATION.md
# (Azure AD, SMTP, port-forward, inline values).
#
# Usage:
#   helm upgrade --install my-wiki ./charts/bookstack -n my-namespace -f values.yaml
#   helm upgrade --install my-wiki ./charts/bookstack -n my-namespace --set key=val
# =============================================================================

# -----------------------------------------------------------------------------
# Kubernetes Secret (preferred for all sensitive values)
# -----------------------------------------------------------------------------
# Set name to an existing Secret in the release namespace. The chart reads
# sensitive values from it using these fixed key names (create your Secret
# with these exact keys; include only the ones you need):
#
#   app-key             — BookStack APP_KEY (required when using kubernetesSecret)
#   azure-tenant-id     — when azuread.enabled: true
#   azure-app-id        — when azuread.enabled: true
#   azure-app-secret    — when azuread.enabled: true
#   smtp-password       — when smtp.enabled: true
#
# Leave name empty to pass appKey / azuread.* / smtp.password via values instead.
# -----------------------------------------------------------------------------
kubernetesSecret:
  name: ""

# -----------------------------------------------------------------------------
# Application URL
# -----------------------------------------------------------------------------
# appHost: wiki.example.com
#   Public hostname. Required only when ingress.enabled is true. No scheme.

# appUrl: "http://localhost:8080"
#   Full URL for links/redirects. If set, overrides https:// + appHost (or
#   http://localhost:8080 when no appHost). Set for port-forward (e.g. localhost).

# -----------------------------------------------------------------------------
# Application key (only when NOT using kubernetesSecret.name)
# -----------------------------------------------------------------------------
# appKey: base64:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#   BookStack APP_KEY (32 bytes, often base64). Required if kubernetesSecret.name
#   is empty. Generate: printf 'base64:'; openssl rand -base64 32

# -----------------------------------------------------------------------------
# Ingress
# -----------------------------------------------------------------------------
ingress:
  enabled: true   # false = no Ingress (e.g. port-forward only); appHost not needed

# allowHttp: false
#   Allow HTTP on Ingress (e.g. redirect to HTTPS). Default: false.

# -----------------------------------------------------------------------------
# Storage
# -----------------------------------------------------------------------------
# storageType: local_secure
#   BookStack STORAGE_TYPE. Default: local_secure.

# -----------------------------------------------------------------------------
# Azure AD (Entra ID) – SSO
# -----------------------------------------------------------------------------
# When enabled, BookStack uses Azure AD for login. Prefer storing tenantId,
# appId, appSecret in kubernetesSecret; see README. App registration steps and
# redirect URI: CONFIGURATION.md#azure-ad-entra-id-app-registration.
#
# azuread:
#   enabled: false
#   tenantId: ""   # Directory (tenant) ID — or in Secret as azure-tenant-id
#   appId: ""      # Application (client) ID — or in Secret as azure-app-id
#   appSecret: ""  # Client secret value — or in Secret as azure-app-secret

# -----------------------------------------------------------------------------
# SMTP – email (password reset, notifications)
# -----------------------------------------------------------------------------
# When enabled, set host, port, username, fromAddress, fromName. Prefer storing
# password in kubernetesSecret (smtp-password); see README. Azure Communication
# Services: CONFIGURATION.md#smtp-with-azure-communication-services.
#
# smtp:
#   enabled: false
#   host: smtp.example.com
#   port: "587"
#   username: ""
#   password: ""       # Or in Secret as smtp-password
#   fromAddress: ""
#   fromName: ""
